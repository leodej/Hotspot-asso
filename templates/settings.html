{% extends "base.html" %}

{% block page_title %}Configurações - MikroTik Manager{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h4><i class="bi bi-gear"></i> Configurações do Sistema</h4>
        <p class="text-muted">Configure parâmetros do sistema</p>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Configurações de Créditos</h5>
    </div>
    <div class="card-body">
        <form method="POST">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="default_credit_mb" class="form-label">Crédito Padrão (MB)</label>
                        <input type="number" class="form-control" id="default_credit_mb" name="default_credit_mb" 
                               value="{{ settings.get('default_credit_mb', 1024) }}">
                        <div class="form-text">Crédito inicial para novos usuários (1024 MB = 1 GB)</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="credit_reset_time" class="form-label">Horário de Reset</label>
                        <input type="time" class="form-control" id="credit_reset_time" name="credit_reset_time" 
                               value="{{ settings.get('credit_reset_time', '00:00') }}">
                        <div class="form-text">Horário diário para reset dos créditos</div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="enable_cumulative" name="enable_cumulative" 
                                   {{ 'checked' if settings.get('enable_cumulative', '1') == '1' }}>
                            <label class="form-check-label" for="enable_cumulative">
                                Habilitar Créditos Cumulativos
                            </label>
                        </div>
                        <div class="form-text">Se habilitado, créditos não utilizados são acumulados</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="system_timezone" class="form-label">Timezone do Sistema</label>
                        <select class="form-select" id="system_timezone" name="system_timezone">
                            <option value="America/Sao_Paulo" {{ 'selected' if settings.get('system_timezone') == 'America/Sao_Paulo' }}>
                                America/Sao_Paulo
                            </option>
                            <option value="America/New_York" {{ 'selected' if settings.get('system_timezone') == 'America/New_York' }}>
                                America/New_York
                            </option>
                            <option value="Europe/London" {{ 'selected' if settings.get('system_timezone') == 'Europe/London' }}>
                                Europe/London
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="text-end">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check-circle"></i> Salvar Configurações
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Sistema Info -->
<div class="card mt-4">
    <div class="card-header">
        <h5 class="mb-0">Informações do Sistema</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6>Status do Sistema</h6>
                <p><span class="badge bg-success">Online</span> Sistema funcionando normalmente</p>
                
                <h6>Banco de Dados</h6>
                <p><i class="bi bi-database"></i> SQLite - mikrotik_manager.db</p>
            </div>
            <div class="col-md-6">
                <h6>Configurações Atuais</h6>
                <ul class="list-unstyled">
                    <li><strong>Crédito Padrão:</strong> {{ settings.get('default_credit_mb', 1024) }} MB</li>
                    <li><strong>Sistema Cumulativo:</strong> {{ 'Habilitado' if settings.get('enable_cumulative', '1') == '1' else 'Desabilitado' }}</li>
                    <li><strong>Reset Diário:</strong> {{ settings.get('credit_reset_time', '00:00') }}</li>
                    <li><strong>Timezone:</strong> {{ settings.get('system_timezone', 'America/Sao_Paulo') }}</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
